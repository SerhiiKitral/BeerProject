<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="../css/choose beer.css" />
    <title>Page Title</title>
	<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/papaparse@5.3.0/papaparse.min.js"></script>
    <script>
      const csvFilePath = '../database/beermeal.csv';
      // Define the column to extract
      

      Papa.parse(csvFilePath, {
        download: true,
        header: true,
        complete: function(results) {
        	const container = document.getElementById('container');
        	const groups = new Map();
	
			// const groups2 = new Map();
			
        	results.data.forEach(function(row) {
			//taking rows
				const beerType = row['beertype'];
				
				
				
				if (!groups.has(beerType)) {
					groups.set(beerType, []);
				}
				
				groups.get(beerType).push(row);
				
				
			});


			//for meals
        	groups.forEach(function(rows, beerType) {
            	const mealList = rows.map(function(row) {  
              		return `<li>${row['meal']}</li>`;
            	}).join('');
				const beerPhoto = rows[0]['photourl'];
				const beerPageContents = `
				<div id="content">
					<img id="ellipse" src="../src/Ellipse 6.png">
					<div id="left">
						<img src="${beerPhoto}" alt="${beerType}">
					</div>
					<div id="right">
						<h1 id="beerType">${beerType}</h1>
						<p>${rows[0]['beer_description']}</p>
						<button id="backBtn" onclick="window.location.reload()">назад до сортів</button>
					</div>
				</div>
				<div id ="bottom">
						<h1 id="beerType">з чим поєднюється</h1>
						
						<ul>
						${mealList}
						</ul>
					</div>
				`;
      const link = document.createElement('a');
      link.href = '#';
      link.innerHTML = 'ПЕРЕЙТИ';
      link.addEventListener('click', function(event) {
        event.preventDefault();
        container.innerHTML = beerPageContents;
      });
      const beerDiv = document.createElement('div');
      beerDiv.id = 'card';
      const beerIMG = document.createElement('img');
      beerIMG.id = 'photo';
      beerIMG.src = beerPhoto;

      const beerName = document.createElement('p');
      beerName.id = 'beerName';
      beerName.innerHTML = beerType;
      beerDiv.appendChild(beerIMG);
      beerDiv.appendChild(beerName);
      beerDiv.appendChild(link);
      container.appendChild(beerDiv);
          	});
        }
      });
    </script>
</head>
<body>
    <header>
		<div class="logo">
			<img class="beer" src="../src/logo_beer.svg">
			<span class="text">shavky.org</span>
		</div>
		<nav>
		<ul>
			<li><a href="index.html">головна</a></li>
			<li><a href="" style="background: rgba(217, 217, 217, 0.47);
				border-radius: 40px;padding: 10px 26px 10px 26px;">пиво і страви</a></li>
			<li><a href="#">де купити</a></li>
		</ul>
		</nav>
	</header>
	<main>
		<div class="choose_beer">
			<div id="container">
				<h1 id="choose_sort"> Виберіть сорт </h1>
				
			</div>
		</div>
	</main>
	<footer>
        <div class="content">
		    <img src="../src/youtube.svg" alt="">
            <p>© 2023 shavky.org - Усі права захищено</p>
        </div>
	</footer>
</body>
</html>